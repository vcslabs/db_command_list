# DB command集
## MySQL
### DB操作以外のコマンド
* mysql起動  
`mysql.server start`


* localhostのMySQLサーバに接続する場合(mysqlが起動している状態で実行)  
  `mysql -u [ユーザー名] -p`


* 外部MySQLサーバに接続する場合(mysqlが起動している状態で実行)  
  `mysql -u [ユーザー名] -p -h [host名] -P [ポート番号]`
  

* ログアウト  
`exit`

  
* ユーザーの追加（パスワードは8文字以上）ユーザー名、ホスト名はどちらもバッククォートで囲む  
`create user ユーザー名@ホスト名 IDENTIFIED BY 'パスワード';`
  

* ユーザーにDB操作権限を付与  
`grant all privileges on test_db.* to testuser@localhost IDENTIFIED BY 'password';`
  
### DB操作
* データベース一覧の表示  
`show databases;`
  

* データベースの追加(test_dbを追加する場合)  
`create database test_db;`


* データベースの選択(test_dbを選択する場合)  
`use test_db;`
  
  
### テーブル操作
* テーブル一覧の表示  
`show tables;`
  

* テーブル一覧の表示（詳細に）  
`show table status;`
  

* テーブル作成（二個目のコマンドはサンプル）  
`CREATE TABLE [テーブル名] (
  [フィールド名] [データ型] [オプション]
  ) ENGINE=[InnoDB/MyISAM] DEFAULT CHARSET=[文字コード];`  
  
`CREATE TABLE m_users (
id int NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT "ID",
user_name VARCHAR(100) NOT NULL COMMENT "ユーザー名",
mail_address VARCHAR(200) NOT NULL COMMENT "メールアドレス",
password VARCHAR(100) NOT NULL COMMENT "パスワード",
created datetime DEFAULT NULL COMMENT "登録日",
modified datetime DEFAULT NULL COMMENT "更新日"
) ENGINE=InnoDB DEFAULT CHARSET=utf8;`
  

* テーブルの削除  
`DROP TABLE [テーブル名]`
  

* テーブル名の変更  
`ALTER TABLE [旧テーブル名] RENAME [新テーブル名]`
  

* テーブルにカラムの追加  
`ALTER TABLE [テーブル名] ADD [追加カラム名] [型] [必要であればオプション等];`
  

* テーブル設計の確認  
`desc [テーブル名]`


* テーブル設計の確認（詳細に）  
`SHOW FULL COLUMNS FROM [テーブル名];`
  
### レコード操作関連
* 追加  
`INSERT INTO [テーブル名] [フィールド名] VALUES [値]`
  

* 更新  
`UPDATE [テーブル名] SET [フィールド名]=[値] WHERE [条件式]`
  

* 全レコード削除  
`DELETE FROM [テーブル名]`
  

* 条件を決めてレコード削除  
`DELETE FROM [テーブル名] WHERE [条件式]`

## Oracle
### DDL(Data Definition Language)関連コマンド
* `generated by default as identity`  
PKにつけることが多く、IDを指定されなかった場合、シーケンス番号を割り振る。  
  つまり、auto incrementと同じ。
  

* `CONSTRAINT 制約名 PRIMARY KEY (対象カラム) USING INDEX`  
CONSTRAINTで制約名を決めれる。  
  PRIMARY KEYで、対象カラムを主キーとして設定できる。  
  USING INDEXでインデックスを貼っている。  
  インデックスを貼る時の考え方は、インデックスを貼るカラムを使って検索が生じることが多くあるかどうか、またインデックスを貼ることで検索が遅くなることもあるので、兼ね合いを考える。
  
  
* `FOREIGN KEY (対象カラム) REFERENCES 外部テーブル名 (外部テーブルの対象カラム)`  
FOREIGN KEY, REFERENCESで外部キー制約を設定できる。
  

* `PARTITION BY HASH (対象カラム) PARTITIONS 分割数`  
  PARTITION BY HASHとすることで、DBを分割数分、対象カラムを元にランダムに分けることができる。  
  いろいろな書き方があって、上記の場合ランダムだが自分で指定することもできる。  
  （例： 1月から2月のデータはここ、3月から4月のデータはここと指定して分けれる）